const fs = require('fs');
const path = require('path');

async function findRestControllers(directory, basePath = '') {
  const files = await fs.promises.readdir(directory);

  for (const file of files) {
    const filePath = path.join(directory, file);
    const stats = await fs.promises.stat(filePath);

    if (stats.isDirectory()) {
      const subPath = path.join(basePath, file);
      await findRestControllers(filePath, subPath);
    } else if (stats.isFile() && file.endsWith('.java')) {
      const content = await fs.promises.readFile(filePath, 'utf8');

      if (content.includes('@RestController')) {
        const className = file.replace('.java', '');
        const requestMappingMatch = content.match(/@RequestMapping\("([^"]*)"\)/);

        if (requestMappingMatch) {
          const requestPath = requestMappingMatch[1];
          const fullPath = path.join(basePath, requestPath);
          console.log(`Found REST controller: ${className} | Request Path: ${fullPath}`);
        }
      }
    }
  }
}

// Specify the directory to scan
const directoryToScan = '/path/to/your/spring-boot-app';

findRestControllers(directoryToScan)
  .catch(err => console.error(err));
